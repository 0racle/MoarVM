#! @sh@
## ---------------------------------------------------------------------
## mk-moar-pc.in -- Describe MoarVM configuration
##
##  Copyright Â© 2014 Daniel Dehennin <daniel.dehennin@baby-gnu.org>
##
##
      prefix="@prefix@"
      bindir="@bindir@"
      libdir="@libdir@"
      mastdir="@mastdir@"
   includedir="${prefix}/include"
      package="@name@"
     version="@version@"
      exeext="@exe@"
        moar="${bindir}/${package}${exeext}"
      ldopts="@ldflags@"
     ldflags="-L${libdir} -l${package}"
        libs="${ldflags}"
      cflags="-I${includedir}"
case '@config@' in
    *--static*)
        static_libs="${libdir}/lib${package}.a"
	;;
    *)
        static_libs=''
	;;
esac
case "${libdir}" in
    /lib | /lib64 | /usr/lib | /usr/lib64 | /usr/lib/* )
	ldopts=''
	ldflags=-l${package}
	;;
    * )
	ldflags="${ldopts} ${ldflags}"
	;;
esac
libs=${ldflags}
test "${includedir}" = "/usr/include" && cflags=""
PS4='>mk-aopc> '
dirname=`dirname ${1}`
test -d ${dirname} || mkdir -p ${dirname} || exit 1

cat > ${1} <<-  _EOF_
	# pkg-config information for MoarVM ${version}
	#
	prefix="${prefix}"
	package="${package}"
	includedir="${includedir}"
	bindir="${bindir}"
	libdir="${libdir}"
	mastdir="${mastdir}"
	ldopts="${ldopts}"
	exeext="${exeext}"
	version="${version}"
	moar="${moar}"
	libs="${libs}"
	libsrc="${libsrc}"
	static_libs="${static_libs}"

	Name:           MoarVM
	Description:    A virtual machine for Rakudo Perl 6 and NQP
	URL:            http://moarvm.org
	Version:        ${version}
	Libs:           ${ldflags}
	Cflags:         ${cflags}
	_EOF_
## end of mk-moar-pc.in
